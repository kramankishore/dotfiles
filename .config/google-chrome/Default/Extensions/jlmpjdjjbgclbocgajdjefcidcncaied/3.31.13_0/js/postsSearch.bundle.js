"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[530],{48819:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var u=t(70468),o=t(93309),r=t(62699),l=t.n(r),s=t(29901),a=t(1726),i=t.n(a),c=t(2067),f=t(91385),d=t.n(f),v=t(83849),h=t.n(v),g=t(35953);var p=t(96206),m=t(33014),y=t(12795),k=t(10120),S=t(81358),w=t(85734),x=t(52067),C=s.createElement,b=i()((function(){return t.e(720).then(t.bind(t,70332))}),{ssr:!1,loadableGenerated:{webpack:function(){return[70332]}}}),I={searchPostSuggestions:y.YX,searchBookmarksSuggestions:k.gr,searchReadingHistorySuggestions:S.nr};function F(e){var n=e.initialQuery,t=e.autoFocus,r=void 0===t||t,a=e.placeholder,i=e.onSubmitQuery,f=e.className,v=e.suggestionType,k=void 0===v?"searchPostSuggestions":v,S=e.onFocus,F=(0,s.useRef)(),E=(0,s.useState)(),B=E[0],D=E[1],K=(0,s.useState)(),P=K[0],R=K[1],Z=(0,s.useState)(null),q=Z[0],z=Z[1],N=(0,s.useState)([]),Q=N[0],Y=N[1],G=(0,x.F)({feature:w.z.searchVersion,shouldEvaluate:!!P&&"searchPostSuggestions"===k}).value,H=I[k],L=(0,c.a)([k,P],(function(){return d()(p.B3,H,{query:P,version:G})}),{enabled:!!P}),O=L.data,T=L.isLoading;(0,s.useEffect)((function(){B||D(n)}),[n]);var U=function(){return z(null)},V=function(){if(!q){var e=F.current.getBoundingClientRect(),n=e.left,t=e.bottom,u=e.width;z({x:n,y:t+window.scrollY,width:u})}};(0,s.useEffect)((function(){var e,n,t;T||(null!=Q&&Q.length||null==O||null===(e=O[k])||void 0===e||!e.hits.length||V(),Y(null!==(n=null==O||null===(t=O[k])||void 0===t?void 0:t.hits.map((function(e){return e.title})))&&void 0!==n?n:[]))}),[O,T]);var X=function(){var e=(0,o.Z)(l().mark((function e(n){var t,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null==n||null===(t=n.replace)||void 0===t?void 0:t.call(n,y.F4,""),e.next=3,i(u||P);case 3:u&&D(u),U();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(e,n){var t=(0,s.useState)(-1),u=t[0],o=t[1];return(0,s.useEffect)((function(){o(-1)}),[e]),{selectedItemIndex:u,onKeyDown:function(t){if(40===t.keyCode||38===t.keyCode){t.preventDefault();var r=e.length+1;if(u>-1){var l=40===t.keyCode?1:-1;o(((u+l)%r+r)%r)}else o(40===t.keyCode?0:r-1)}else 13===t.keyCode&&n(u>-1&&e[u])}}}(Q,X),A=j.selectedItemIndex,J=j.onKeyDown,M=(0,m.Z)((function(e){return R(e)}),100),W=(0,u.Z)(M,1)[0];(0,s.useEffect)((function(){var e;r&&(null===(e=F.current)||void 0===e||e.querySelector("input").focus())}),[F,r]);var $=!!q&&!!Q.length;return C(s.Fragment,null,C(g.U,{className:h()("compact flex-1",f),inputId:"posts-search",fieldSize:"medium",placeholder:null!=a?a:"Find posts",ref:F,value:B,valueChanged:function(e){if(!e.length)return U(),void R("");e&&e!==n&&W(e),null===q&&V()},onKeyDown:J,onBlur:function(){null!=P&&P.length&&U()},onFocus:function(e){null==S||S(e),null!=Q&&Q.length&&V()},"aria-haspopup":"true","aria-expanded":$}),C(b,{placement:q,items:Q,focusedItemIndex:A,onItemClick:X,isOpen:$}))}}}]);