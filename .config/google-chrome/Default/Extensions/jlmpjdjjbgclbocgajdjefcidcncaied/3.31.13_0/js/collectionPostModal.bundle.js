"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[992],{21051:(e,t,o)=>{o.r(t),o.d(t,{default:()=>je});var n=o(51911),a=o(53767),s=o(29901),i=o(97518),l=o(22454),r=o(16309),c=o(98308),u=o(21981),p=o(61188),d=o(52210),f=o(28076),m=o(83849),g=o.n(m),v=o(34260),P=o.n(v),b=o(73084),x=o(75160),N=o(85301),y=o(76309),h=o(45952),C=o(56567),O=o(86960),w=o(73503),k=o(76204),j=o(43643),Z=o(75733),E=o(36863),A=o(99269),R=o(22589),D=o(90958),S=["post","onClose","inlineActions","className","notificationClassName","contextMenuId","onRemovePost"],I=s.createElement,L=(0,A.Z)("div","flex flex-row items-center"),T=function(e){var t=e.post,o=e.onClose,s=e.inlineActions,i=e.className,l=(e.notificationClassName,e.contextMenuId),c=e.onRemovePost,u=(0,a.Z)(e,S);return I(L,(0,n.Z)({},u,{className:g()("gap-2",i)}),I(D.E,{post:t}),I(R.b,{post:t,onClose:o,inlineActions:s,contextMenuId:l,onRemovePost:c,origin:r.aP.CollectionModal}))},q=o(48850),z=o(96543),F=o(91255),M=o(86825),W=s.createElement,Q=function(e){var t=e.className,o=(0,z.o)(),n=o.checkHasCompleted,a=o.completeAction;return!o.isActionsFetched||n(F.Us.CollectionsIntro)?null:W("span",{className:g()("relative flex w-full flex-row rounded-10 border border-accent-cabbage-default p-3 pr-2",t)},W("div",{className:"flex flex-1 flex-col typo-subhead"},W("strong",null,"Introducing collections!"),W("p",{className:"mt-2"},"Collections are posts that aggregate all the information about specific news to help you save time and discuss with the community.")),W(q.Z,{size:M.qE.XSmall,onClick:function(){return a(F.Us.CollectionsIntro)}}))},B=o(93309),H=o(62699),U=o.n(H),V=o(29097),X=o(75943),Y=o(6189),_=s.createElement,J={type:"button",iconOnly:!0,buttonSize:M.qE.Small},G=function(e){var t=e.hasNext,o=e.hasPrevious,a=e.onNext,s=e.onPrevious;return _("div",{className:"flex items-center justify-end border-t border-border-subtlest-tertiary p-3"},_(Y.zx,(0,n.Z)({},J,{icon:_(X.e0,{className:"-rotate-90"}),variant:M.Wu.Tertiary,disabled:!o,onClick:s})),_(Y.zx,(0,n.Z)({},J,{icon:_(X.e0,{className:"rotate-90"}),variant:M.Wu.Tertiary,disabled:!t,onClick:a})))},K=o(22057),$=o(7675),ee=o(81618),te=o(11056),oe=o(48706),ne=o(36909),ae=o(96206),se=o(43573),ie=o(11178),le=o(63496);function re(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?re(Object(o),!0).forEach((function(t){(0,f.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):re(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var ue=s.createElement,pe=function(e){var t=e.className,o=e.post,n=e.perPage,a=void 0===n?d.t:n,i=e.relationType,l=function(e){var t=e.postId,o=e.relationType,n=e.perPage,a=void 0===n?d.t:n,i=(0,le.Y)().requestMethod,l=(0,oe.NL)(),r=(0,ne.N)((0,se.e0)(se.dt.RelatedPosts,null,{id:t,type:o}),function(){var e=(0,B.Z)(U().mark((function e(n){var s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.pageParam,e.next=3,i(ae.B3,d.Pl,{id:t,relationType:o,first:a,after:s});case 3:return l=e.sent,e.abrupt("return",l.relatedPosts);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{enabled:!!t,getNextPageParam:function(e){var t,o;return(null==e||null===(t=e.pageInfo)||void 0===t?void 0:t.hasNextPage)&&(null==e||null===(o=e.pageInfo)||void 0===o?void 0:o.endCursor)},select:(0,s.useCallback)((function(e){if(e)return ce(ce({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[]),staleTime:se.R.Default,initialData:function(){if(o===d.WQ.Collection){var e=l.getQueryData((0,ie.NZ)(t));if(null!=e&&e.relatedCollectionPosts)return{pages:[e.relatedCollectionPosts],pageParams:[null]}}}});return{relatedPosts:r.data,isLoading:r.isLoading,hasNextPage:r.hasNextPage,fetchNextPage:r.fetchNextPage,isFetchingNextPage:r.isFetchingNextPage}}({postId:o.id,relationType:i,perPage:a}),r=l.relatedPosts,c=l.isLoading,u=l.isFetchingNextPage,p=l.hasNextPage,f=l.fetchNextPage,m=(0,s.useState)(0),v=m[0],P=m[1],b=null==r?void 0:r.pages[v],x=c||!(null==b||!b.edges.length),N=!(null==r||!r.pages[v+1]);return(0,s.useEffect)((function(){p&&!N&&f()}),[p,N,f]),x?ue("div",{className:g()(t,"flex flex-col",V.zl)},ue("div",{className:"flex cursor-pointer items-center justify-between rounded-16 rounded-t-16 px-4 py-1.5 laptop:cursor-auto laptop:py-4 laptop:!pb-0"},ue("p",{className:"font-bold text-text-quaternary typo-callout laptop:text-text-quaternary"},o.numCollectionSources," sources")),ue("div",{className:"flex flex-col pb-0 pt-2 laptop:min-h-[14rem]"},c&&ue("article",{"aria-busy":!0,className:"flex w-60 flex-col items-stretch px-4 py-2 laptop:w-full"},ue("div",{className:"mb-2 flex items-center"},ue(K.f,{className:"mr-2 h-6 w-6 rounded-full"}),ue(K.f,{className:"h-4 w-24"})),ue("div",{className:"mb-2 flex flex-1 flex-col items-center"},ue(K.f,{className:"my-1 h-4 w-full"}),ue(K.f,{className:"my-1 h-4 w-full"}))),!c&&(null==b?void 0:b.edges.map((function(e){var t=e.node;return ue("article",{key:t.id,className:"relative flex flex-col gap-2 px-4 py-2 hover:bg-theme-hover"},ue(te.YS,{className:"cursor-pointer",href:t.commentsPermalink,title:t.title}),ue("div",{className:"flex overflow-hidden"},ue($.e,{source:t.source,size:"small"}),ue(ee.Z,{description:t.source.name,createdAt:t.createdAt})),ue("p",{className:"line-clamp-2 text-text-link typo-callout"},t.title),!!t.summary&&ue("p",{className:"line-clamp-2 text-text-tertiary typo-footnote"},t.summary))})))),ue(G,{hasNext:N,hasPrevious:v>0,onPrevious:function(){P((function(e){return e?e-1:0}))},onNext:(0,B.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(!p||N){e.next=5;break}return e.next=5,f();case 5:P((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))})):null},de=s.createElement,fe=function(e){var t=e.onCopyPostLink,o=e.post,n=e.origin,a=e.className,s=e.onClose;return de(j.ry,{className:a},de(T,{post:o,onClose:s,className:"hidden pt-6 laptop:flex",contextMenuId:"post-widgets-context"}),de(Q,{className:"hidden laptop:flex"}),de(pe,{post:o,relationType:d.WQ.Collection}),de(E.Z,{post:o}),de(Z.I,{post:o,origin:n,onCopyPostLink:t,link:o.commentsPermalink}))},me=o(82504),ge=o(36712),ve=o(24283),Pe=o(32575),be=o(51185),xe=o(34951),Ne=o(51577),ye=s.createElement;function he(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?he(Object(o),!0).forEach((function(t){(0,f.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):he(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Oe=function(e){var t,o,n=e.post,a=e.className,i=void 0===a?{}:a,l=e.shouldOnboardAuthor,r=e.origin,c=e.position,u=e.inlineActions,p=e.onPreviousPost,d=e.onNextPost,f=e.onClose,m=e.postPosition,v=e.isFallback,j=e.customNavigation,Z=e.onRemovePost,E=e.backToSquad,A=e.isBannerVisible,R=e.isPostPage,D=(0,ve.Eu)().user,S=(0,x.sW)().subject,I=(0,y.Z)({origin:r,post:n}),L=n.updatedAt,T=n.contentHtml,q=n.image,z=I.onCopyPostLink,F=I.onReadArticle,M=!!p||!!d,W=g()("laptop:flex-row laptop:pb-0",null==i?void 0:i.container),B={postPosition:m,onPreviousPost:p,onNextPost:d,post:n,onReadArticle:F,onClose:f,inlineActions:u,onRemovePost:Z},H=(0,be.E)(n);return(0,s.useEffect)((function(){null!=n&&n.id&&null!=D&&D.id&&H(n.id)}),[null==n?void 0:n.id,H,null==D?void 0:D.id]),ye(N.Z,{hasNavigation:M,className:W,"aria-live":S===x._R.PostContent?"polite":"off",navigationProps:"fixed"===c?Ce(Ce({},B),{},{isBannerVisible:A,className:null==i?void 0:i.fixedNavigation}):null},ye(me.b,{className:g()("relative",null==i?void 0:i.content),"data-testid":"postContainer"},ye(h.F,{className:Ce(Ce({},i),{},{onboarding:g()(null==i?void 0:i.onboarding,E&&"mb-6"),navigation:{actions:null==i||null===(t=i.navigation)||void 0===t?void 0:t.actions,container:g()("pt-6",null==i||null===(o=i.navigation)||void 0===o?void 0:o.container)}}),isPostPage:R,isFallback:v,customNavigation:j,shouldOnboardAuthor:l,navigationProps:B,engagementProps:I,origin:r,post:n},ye("div",{className:g()("mb-6 flex flex-col gap-6",M||j?"mt-6":"mt-6 laptop:mt-0")},ye(Q,{className:"laptop:hidden"}),ye(P(),{href:"".concat(Pe.uJ,"sources/collections"),passHref:!0},ye(ge.D,{tag:"a",label:"Collection",className:"bg-theme-overlay-float-cabbage text-brand-default"})),ye("h1",{className:"break-words font-bold typo-large-title","data-testid":"post-modal-title"},n.title),ye(Ne.R,{tags:n.tags||[]}),!!L&&ye("div",{className:"flex items-center text-text-tertiary typo-footnote"},ye("span",null,"Last updated")," ",ye(O.Z0,null),ye(xe.t,{date:L,type:w.lf.Post})),q&&ye("div",{className:"block h-auto w-full overflow-hidden rounded-12"},ye(b.w,{imgSrc:q,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:C.n.post.imageCoverPlaceholder})),ye(k.Z,{content:T})))),ye(fe,{onCopyPostLink:z,post:n,className:"pb-8",onClose:f,origin:r}))},we=["id","className","onRequestClose","onPreviousPost","onNextPost","postPosition","post","onRemovePost"],ke=s.createElement;function je(e){e.id,e.className;var t=e.onRequestClose,o=e.onPreviousPost,f=e.onNextPost,m=e.postPosition,g=e.post,v=e.onRemovePost,P=(0,a.Z)(e,we),b=(0,s.useContext)(p.ZP).showArticleOnboarding,x=(0,c.Z)({isDisplayed:P.isOpen,offset:b?l.Dg:0}),N=x.position,y=x.onLoad;return ke(u.Z,(0,n.Z)({},P,{onAfterOpen:y,onRequestClose:t,postType:d.hQ.Collection,source:g.source,loadingClassName:"!pb-2 laptop:pb-0"}),ke(Oe,{position:N,post:g,postPosition:m,onPreviousPost:o,onNextPost:f,inlineActions:!0,className:{onboarding:"mt-8",navigation:{actions:"ml-auto laptop:hidden"},fixedNavigation:{container:i.Eu[i.u_.Size.XLarge],actions:"ml-auto"}},onClose:t,origin:r.aP.CollectionModal,onRemovePost:v}))}}}]);