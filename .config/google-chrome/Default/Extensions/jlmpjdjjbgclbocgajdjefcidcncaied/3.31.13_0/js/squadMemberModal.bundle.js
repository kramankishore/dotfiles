"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[982],{24757:(e,t,r)=>{r.r(t),r.d(t,{SquadMemberModal:()=>Se,default:()=>je});var n,o=r(51911),a=r(70468),l=r(53767),i=r(29901),c=r(97518),s=r(45462),u=r(54883),m=r(10807),d=r(23659),p=r(98935),b=r(93309),f=r(28076),v=r(62699),h=r.n(v),y=r(24283),P=r(32575),g=r(4714),k=r(2360),w=r(25052),M=r(58305);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}const O=function(e){return i.createElement("svg",x({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=i.createElement("path",{d:"M4.87 20.001l-.234-.016-.108-.012c-.783-.122-1.395-.743-1.51-1.567l-.016-.147L3 18.143l.001-.3.005-.22c.097-2.215 1.478-4.174 3.636-5.143.166-.064.333-.121.5-.173l-.015-.007a3.958 3.958 0 014.005-6.825l.018-.023a4.222 4.222 0 017.409 2.77c0 1.392-.68 2.668-1.819 3.469l-.156.103.27.088.268.098.093.04.227.108c2.03 1.014 3.375 2.948 3.545 5.154l.013.237.004.236v.313L21 18.17l-.007.092-.012.103a1.926 1.926 0 01-1.633 1.61l-.15.014-.188.012H4.87zm4.823-6.803l-.053.05a4.865 4.865 0 00-.389-.015c-.72 0-1.44.138-2.162.414-1.601.72-2.673 2.175-2.82 3.83l-.014.2-.004.194-.001.275.002.081.012.085a.558.558 0 00.375.407l.082.02.056.003H7.8l-.042-.123a2.085 2.085 0 01-.07-.32l-.016-.157-.003-.123.001-.32.006-.235c.071-1.64.804-3.15 2.016-4.266zm4.645-.416c-.769 0-1.537.147-2.306.442-1.709.768-2.852 2.32-3.01 4.085l-.013.213-.005.207v.293l.002.087.013.09c.046.206.2.371.4.434l.087.02.059.005h9.549l.092-.012c.209-.046.374-.2.437-.4l.02-.087.008-.092v-.313l-.004-.21-.013-.215c-.138-1.633-1.121-3.084-2.61-3.905l-.197-.103-.203-.096-.288-.104a6.314 6.314 0 00-2.018-.339zM9.25 6.25a2.708 2.708 0 101.123 5.174l.167-.084.162-.095.138-.095c.092-.066.179-.138.261-.215a4.212 4.212 0 01-.987-2.713c0-.613.131-1.195.366-1.721l-.016.037A2.676 2.676 0 009.25 6.25zm5.087-.917a2.889 2.889 0 101.197 5.52l.18-.09.171-.102.148-.1a2.889 2.889 0 00-1.696-5.227z",fill:"currentcolor",fillRule:"evenodd"})))};var S;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}const Z=function(e){return i.createElement("svg",j({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),S||(S=i.createElement("path",{d:"M14.775 13.195c.785 0 1.57.132 2.355.395l.337.121.236.112.23.121c1.738.958 2.886 2.652 3.047 4.558l.016.25.001.09-.006.079-.024.102a.692.692 0 01-.51.466l-.108.015-11.145-.001-.07-.005-.101-.024a.694.694 0 01-.467-.506l-.015-.099.003-.142.017-.249c.184-2.06 1.518-3.871 3.512-4.768a7.473 7.473 0 012.692-.515zm-7.783 5.462l.001.177.001-.029.02.18c.009.064.02.127.034.19l.048.182.049.144h-3.53l-.065-.005-.096-.022a.651.651 0 01-.437-.475l-.014-.093.003-.098.015-.233c.172-1.932 1.424-3.63 3.293-4.47a7.006 7.006 0 012.524-.484c.151 0 .303.006.453.018l-.181.176C7.84 15.09 7.078 16.757 7 18.559l-.006.235-.002-.137zM8.836 5.47a3.161 3.161 0 101.31 6.04l.196-.099.189-.111.161-.11c.107-.078.209-.162.305-.252a4.916 4.916 0 01-1.152-3.166c0-.613.112-1.2.317-1.742l.09-.224a3.124 3.124 0 00-1.416-.336zm5.938-.97a3.372 3.372 0 101.397 6.442l.21-.105.2-.119.172-.117a3.372 3.372 0 00-1.98-6.101z",fill:"currentcolor",fillRule:"evenodd"})))};var N,T,q=i.createElement,z=function(e){return q(g.ZP,(0,o.Z)({},e,{IconPrimary:O,IconSecondary:Z}))},D=r(21995),C=r(23511),A=r(63971),B=r(17963),E=r(75160),U=r(64761),I=r(57767),L=r(86825),R=r(37421),_=i.createElement;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.PromoteToAdmin="Make admin",e.PromoteToModerator="Promote to moderator",e.DemoteToModerator="Demote to moderator",e.DemoteToMember="Demote to member",e.BlockMember="Block member"}(T||(T={}));var W=(0,f.Z)({},T.BlockMember,"Yes, block member"),F=(N={},(0,f.Z)(N,T.PromoteToAdmin,(function(e,t){return"".concat(e," will get the same permissions as you have. Making someone an admin will not replace you as the admin of ").concat(t,". You can reverse this decision later.")})),(0,f.Z)(N,T.PromoteToModerator,(function(e){return"".concat(e," will now get moderator permissions and be able to remove posts and members from your Squad. You can reverse this decision later.")})),(0,f.Z)(N,T.DemoteToModerator,(function(e){return"".concat(e," will no longer have admin permissions. You can always reverse this decision later.")})),(0,f.Z)(N,T.DemoteToMember,(function(e){return"".concat(e," will lose the moderator permissions and become a regular member.")})),(0,f.Z)(N,T.BlockMember,(function(e,t){return"".concat(e," will be blocked and will no longer have access to ").concat(t,". They will not be able to rejoin unless you unblock them.")})),N),H=(0,f.Z)({},T.BlockMember,I.S.Ketchup),K=(0,f.Z)({},T.BlockMember,"Member has been blocked"),Y=function(e,t){var r={label:T.PromoteToAdmin,icon:_(k.r,{size:g.Jh.Small}),action:t(s.Pt.Admin,T.PromoteToAdmin)},n={label:T.PromoteToModerator,icon:_(w.t,{size:g.Jh.Small}),action:t(s.Pt.Moderator,T.PromoteToModerator)},o={label:T.DemoteToModerator,icon:_(M.w,{size:g.Jh.Small}),action:t(s.Pt.Moderator,T.DemoteToModerator)},a={label:T.DemoteToMember,icon:_(z,{size:g.Jh.Small}),action:t(s.Pt.Member,T.DemoteToMember)};return e.role===s.Pt.Admin?[o,a]:e.role===s.Pt.Moderator?[r,a]:[r,n]};function X(e){var t=e.squad,r=e.member,n=e.onUpdateRole,o=e.isOpen,a=(0,i.useContext)(y.ZP).user,l=(0,C.G)().showPrompt,c=(0,E.sW)().displayToast,u=function(){var e=(0,b.Z)(h().mark((function e(o,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({title:"".concat(a,"?"),description:F[a](r.user.name,t.name),okButton:J({title:W[a]||a,variant:L.Wu.Primary},H[a]&&{color:H[a]}),content:_(A.z,{user:r.user,disableTooltip:!0,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({sourceId:t.id,memberId:r.user.id,role:o});case 7:K[a]&&c(K[a]);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=(0,i.useMemo)((function(){if(!r||!a)return[];var e=function(e,t){return function(){return u(e,t)}},n=[],o=(0,U.P4)(t,s.gm.MemberRoleUpdate);if(o){var l=Y(r,e);n.push.apply(n,(0,p.Z)(l))}return n.push({label:"Report member",icon:_(D.U,{size:g.Jh.Small}),anchorProps:{href:"".concat(P.o2,"#user_id=").concat(a.id,"&reportee_id=").concat(null==r?void 0:r.user.id,"&squad_id=").concat(t.id),className:"flex items-center w-full",rel:"noopener noreferrer",target:"_blank"}}),(o||(0,U.P4)(t,s.gm.MemberRemove)&&r.role===s.Pt.Member)&&n.push({label:T.BlockMember,icon:_(M.w,{size:g.Jh.Small}),action:e(s.Pt.Blocked,T.BlockMember)}),n}),[r]);return _(B.default,{options:m,isOpen:o,id:R.x.SquadMemberContext})}var G=r(16309),V=r(96883),$=r(19852),ee=r(43643),te=r(48706),re=r(59266),ne=r(36909),oe=r(91385),ae=r.n(oe),le=r(96206),ie=r(43573),ce=r(18528),se=r(29064);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var me=function(e){var t=e.squad,r=e.query,n=e.membersQueryParams,o=void 0===n?{}:n,a=e.membersQueryEnabled,l=(0,i.useContext)(se._).queryKey,c=(0,y.Eu)().user,s=(0,te.NL)(),u=(0,ie.e0)(ie.dt.SquadMembers,null,o,null==t?void 0:t.id,r),m=(0,re.D)(U.Tm,{onSuccess:function(){return s.invalidateQueries(u)}}).mutateAsync,d=(0,re.D)(U.iU,{onSuccess:function(){return s.invalidateQueries(u)}}).mutateAsync,p=(0,re.D)(U.WV,{onSuccess:function(){s.invalidateQueries(l),(0,ce.S)(s,t,c,{collapsePinnedPosts:!0})}}).mutateAsync,b=(0,re.D)(U.hv,{onSuccess:function(){s.invalidateQueries(l),(0,ce.S)(s,t,c,{collapsePinnedPosts:!1})}}).mutateAsync,v=(0,ne.N)(u,(function(e){var n=e.pageParam;return ae()(le.B3,U.q9,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:null==t?void 0:t.id,after:"string"==typeof n?n:void 0,query:r},o))}),{enabled:!(null==t||!t.id)&&a,getNextPageParam:function(e){var t,r,n,o;return(null==e||null===(t=e.sourceMembers)||void 0===t||null===(r=t.pageInfo)||void 0===r?void 0:r.hasNextPage)&&(null==e||null===(n=e.sourceMembers)||void 0===n||null===(o=n.pageInfo)||void 0===o?void 0:o.endCursor)}});return(0,i.useMemo)((function(){var e,t;return{onUnblock:d,onUpdateRole:m,collapseSquadPinnedPosts:p,expandSquadPinnedPosts:b,membersQueryResult:v,members:null!==(e=null===(t=v.data)||void 0===t?void 0:t.pages.map((function(e){return e.sourceMembers.edges.map((function(e){return e.node}))})).flat())&&void 0!==e?e:[]}}),[d,m,p,b,v])},de=r(6189),pe=r(58764),be=r(31952),fe=r(19796),ve=i.createElement;const he=function(e){var t=e.member,r=e.onUnblock,n=e.onOptionsClick,o=(0,C.G)().showPrompt,a=(0,E.sW)().displayToast,l=(0,y.Eu)().user,c=t.role,u=t.user,m=function(){var e=(0,b.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:"Unblock member?",description:"".concat(u.name," will now have access to join your Squad and can then post, upvote and comment"),okButton:{title:"Unblock",variant:L.Wu.Primary},content:ve(A.z,{disableTooltip:!0,user:u,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}},e.next=4,o(n);case 4:if(!e.sent){e.next=7;break}r(t),a("Member is now unblocked");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(c===s.Pt.Blocked)return ve(be.i,{content:"Unblock"},ve(de.zx,{className:"my-auto",variant:L.Wu.Tertiary,icon:ve(M.w,null),onClick:m}));var d=ve(be.i,{content:"Member options"},ve(de.zx,{size:L.qE.Small,variant:L.Wu.Tertiary,className:"m-auto mr-0",onClick:n,icon:ve(pe.O,null)})),p=l&&l.id===u.id,f=p||!l;return c!==s.Pt.Member?ve(i.Fragment,null,ve(fe.Z,{className:p?"mr-10":"mr-2",role:t.role}),f?null:d):f?null:d};var ye=r(33014),Pe=r(88467),ge=i.createElement;function ke(){return ge("div",{className:"flex flex-1 flex-col items-center justify-center"},ge(M.w,{secondary:!0,size:g.Jh.XXXLarge}),ge("p",{className:"text-text-secondary typo-body"},"No blocked members found"))}var we,Me=["squad"],xe=i.createElement;!function(e){e.AllMembers="Squad members",e.BlockedMembers="Blocked members"}(we||(we={}));var Oe=function(e){var t=e.squad,r=(0,$.J)({squad:t,origin:G.aP.SquadMembersList}),n=r.copying,o=r.trackAndCopyLink;return(0,U.P4)(t,s.gm.Invite)?xe("button",{type:"button",disabled:n,className:"flex items-center justify-start px-6 py-3 hover:bg-theme-hover",onClick:function(){o()}},xe(ee.bA,{className:"mr-4 h-12 w-12 rounded-10 bg-theme-float"},xe(V.x,{size:g.Jh.Large,className:"text-raw-salt-90"})),xe("p",{className:"text-raw-salt-90 typo-callout"},"Copy invitation link")):null};function Se(e){var t,r,n=e.squad,p=(0,l.Z)(e,Me),b=(0,i.useState)(null),f=b[0],v=b[1],h=(0,i.useState)(null),y=h[0],P=h[1],g=(0,d.Z)({id:R.x.SquadMemberContext}),k=g.onMenuClick,w=g.onHide,M=g.isOpen,x=(0,i.useState)(""),O=x[0],S=x[1],j=(0,ye.Z)((function(e){return S(e)}),Pe.Th),Z=(0,a.Z)(j,1)[0],N=me({squad:n,query:null!=O&&null!==(t=O.trim)&&void 0!==t&&null!==(r=t.call(O))&&void 0!==r&&r.length?O:void 0,membersQueryParams:{role:f},membersQueryEnabled:!0}),T=N.members,q=N.membersQueryResult,z=N.onUnblock,D=N.onUpdateRole;return xe(i.Fragment,null,xe(u.Z,(0,o.Z)({},p,{kind:c.u_.Kind.FixedCenter,title:"Squad members",tabs:Object.values(we),header:(0,U.P4)(n,s.gm.ViewBlockedMembers)?xe(c.u_.Header.Tabs,{onTabClick:function(e){return v(e===we.BlockedMembers?s.Pt.Blocked:null)}}):null,scrollingProps:{isFetchingNextPage:q.isFetchingNextPage,canFetchMore:(0,m.H)(q),fetchNextPage:q.fetchNextPage,onScroll:w},userListProps:{additionalContent:function(e,t){return xe(he,{member:T[t],onUnblock:function(){return z({sourceId:n.id,memberId:e.id})},onOptionsClick:function(e){e.preventDefault(),function(e,t){P(t),k(e)}(e,T[t])}})},emptyPlaceholder:O?xe(ee.bA,{className:"p-10 text-text-tertiary typo-callout"},"No user found"):xe(ke,null),isLoading:q.isLoading,initialItem:f===s.Pt.Blocked||null!=O&&O.length?void 0:xe(Oe,{squad:n})},users:null==T?void 0:T.map((function(e){return e.user})),onSearch:Z})),xe(X,{squad:n,member:y,onUpdateRole:D,isOpen:M}))}const je=Se},54883:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(51911),o=r(53767),a=r(29901),l=r(97518),i=r(39691),c=r(35953),s=["users","title","header","scrollingProps","placeholderAmount","size","userListProps","onSearch"],u=["onScroll"],m=a.createElement;const d=function(e){var t=e.users,r=e.title,d=e.header,p=e.scrollingProps,b=e.placeholderAmount,f=e.size,v=void 0===f?l.u_.Size.Medium:f,h=e.userListProps,y=e.onSearch,P=(0,o.Z)(e,s),g=(0,a.useRef)(),k=(0,a.useState)(),w=k[0],M=k[1],x=p.onScroll,O=(0,o.Z)(p,u);return m(l.u_,(0,n.Z)({contentRef:function(e){return M(e)},kind:l.u_.Kind.FlexibleCenter,size:v},P),null!=d?d:m(l.u_.Header,{title:r}),m(l.u_.Body,{className:"!p-0",onScroll:x,ref:g},y&&m(c.U,{className:"mx-6 my-4",inputId:"members-search",valueChanged:y}),m(i.Z,(0,n.Z)({},h,{users:t,scrollingProps:O,placeholderAmount:b,userInfoProps:{scrollingContainer:g.current,appendTooltipTo:w}}))))}},39691:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(51911),o=r(29901),a=r(34260),l=r.n(a),i=r(50998),c=r(63971),s=r(10807),u=o.createElement;const m=function(e){var t=e.placeholderAmount,r=e.scrollingProps,o=e.users,a=e.additionalContent,m=e.initialItem,d=e.isLoading,p=e.emptyPlaceholder,b=e.userInfoProps,f=void 0===b?{}:b,v=u(i.K,{placeholderAmount:t});return null!=o&&o.length?u(s.Z,(0,n.Z)({},r,{"aria-label":"users-list",placeholder:v}),!!m&&m,o.map((function(e,t){return u(l(),{key:e.username,href:e.permalink},u(c.z,(0,n.Z)({},f,{tag:"a",href:e.permalink,user:e}),null==a?void 0:a(e,t)))}))):d?v:null!=p?p:v}},50998:(e,t,r)=>{r.d(t,{K:()=>i});var n=r(29901),o=r(90585),a=n.createElement,l=5;function i(e){var t=e.placeholderAmount;return a("div",{className:"flex flex-col"},Array(t<=l?t:l).fill(0).map((function(e,t){return a(o.x,{key:t})})))}}}]);